{"version":3,"sources":["../../src/scripts/DateInput.tsx"],"names":["React","Component","classnames","moment","autoAlign","Button","FormElement","Input","Datepicker","uuid","isElInChildren","registerStyle","DatepickerDropdown","props","className","alignment","dateValue","minDate","maxDate","extensionRenderer","elementRef","onSelect","onBlur","onClose","vertAlign","align","datepickerClassNames","undefined","handleDOMRef","node","DatepickerDropdownPortal","triggerSelector","alignmentStyle","DateInput","state","id","opened","defaultOpened","value","defaultValue","inputValue","onDateIconClick","bind","onInputKeyDown","onInputChange","onInputBlur","onDatepickerSelect","onDatepickerBlur","onDatepickerClose","prevProps","prevState","onValueChange","setTimeout","showDatepicker","e","keyCode","preventDefault","stopPropagation","currentTarget","setValueFromInput","onComplete","onKeyDown","target","setState","onChange","isFocusedInComponent","dvalue","format","getValueFormat","inputEl","input","focus","select","includeTime","dateFormat","mvalue","getInputValueFormat","isValid","targetEl","document","activeElement","datepicker","disabled","totalCols","cols","label","required","error","menuAlign","isOpened","formElemProps","renderInput"],"mappings":"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","sourcesContent":["import React, {\n  Component,\n  KeyboardEvent,\n  ChangeEvent,\n  FocusEvent,\n} from 'react';\nimport classnames from 'classnames';\nimport moment from 'moment';\nimport { autoAlign, InjectedProps } from './AutoAlign';\nimport { Button } from './Button';\nimport { FormElement } from './FormElement';\nimport { Input, InputProps } from './Input';\nimport { Datepicker } from './Datepicker';\nimport { uuid, isElInChildren, registerStyle } from './util';\n\ntype DatepickerDropdownProps = {\n  className?: string;\n  dateValue?: string;\n  minDate?: string;\n  maxDate?: string;\n  elementRef?: (node: HTMLDivElement) => void;\n  extensionRenderer?: (...props: any[]) => JSX.Element;\n  onSelect?: (date: string) => void;\n  onBlur?: (e: React.FocusEvent<HTMLDivElement>) => void;\n  onClose?: () => void;\n} & InjectedProps;\n\n/**\n *\n */\nclass DatepickerDropdown extends Component<DatepickerDropdownProps> {\n  node: HTMLDivElement | null = null;\n\n  render() {\n    const {\n      className,\n      alignment,\n      dateValue,\n      minDate,\n      maxDate,\n      extensionRenderer,\n      elementRef,\n      onSelect,\n      onBlur,\n      onClose,\n    } = this.props;\n    const [vertAlign, align] = alignment;\n    const datepickerClassNames = classnames(\n      className,\n      'slds-dropdown',\n      align ? `slds-dropdown_${align}` : undefined,\n      vertAlign ? `slds-dropdown_${vertAlign}` : undefined\n    );\n    const handleDOMRef = (node: HTMLDivElement) => {\n      this.node = node;\n      if (elementRef) {\n        elementRef(node);\n      }\n    };\n    return (\n      <Datepicker\n        elementRef={handleDOMRef}\n        className={datepickerClassNames}\n        selectedDate={dateValue}\n        autoFocus\n        minDate={minDate}\n        maxDate={maxDate}\n        extensionRenderer={extensionRenderer}\n        onSelect={onSelect}\n        onBlur={onBlur}\n        onClose={onClose}\n      />\n    );\n  }\n}\n\nconst DatepickerDropdownPortal = autoAlign({\n  triggerSelector: '.slds-dropdown-trigger',\n  alignmentStyle: 'menu',\n})(DatepickerDropdown);\n\nexport type DateInputProps = {\n  value?: string | null;\n  defaultValue?: string | null;\n  opened?: boolean;\n  defaultOpened?: boolean;\n  dateFormat?: string;\n  includeTime?: boolean;\n  minDate?: string;\n  maxDate?: string;\n  menuAlign?: 'left' | 'right';\n  onBlur?: () => void;\n  onValueChange?: (value: string | null, prevValue: string | null) => void;\n  onComplete?: () => void;\n  extensionRenderer?: (...props: any[]) => JSX.Element;\n} & Omit<InputProps, 'value' | 'defaultValue' | 'onBlur' | 'onValueChange'>;\n\ntype DateInputState = {\n  id: string;\n  opened: boolean;\n  value: string | null;\n  inputValue: string | null;\n};\n/**\n *\n */\nexport class DateInput extends Component<DateInputProps, DateInputState> {\n  static isFormElement = true;\n\n  node: HTMLDivElement | null = null;\n\n  datepicker: HTMLDivElement | null = null;\n\n  input: HTMLInputElement | null = null;\n\n  constructor(props: Readonly<DateInputProps>) {\n    super(props);\n    this.state = {\n      id: `form-element-${uuid()}`,\n      opened:\n        typeof props.opened !== 'undefined'\n          ? props.opened\n          : props.defaultOpened || false,\n      value:\n        typeof props.value !== 'undefined'\n          ? props.value\n          : props.defaultValue || null,\n      inputValue: null,\n    };\n\n    this.onDateIconClick = this.onDateIconClick.bind(this);\n    this.onInputKeyDown = this.onInputKeyDown.bind(this);\n    this.onInputChange = this.onInputChange.bind(this);\n    this.onInputBlur = this.onInputBlur.bind(this);\n\n    this.onDatepickerSelect = this.onDatepickerSelect.bind(this);\n    this.onDatepickerBlur = this.onDatepickerBlur.bind(this);\n    this.onDatepickerClose = this.onDatepickerClose.bind(this);\n\n    registerStyle('dateinput', [\n      [\n        '.slds-has-error .slds-datepicker .slds-select',\n        '{ border: 1px solid #d8dde6; box-shadow: none; }',\n      ],\n    ]);\n  }\n\n  componentDidUpdate(prevProps: DateInputProps, prevState: DateInputState) {\n    if (this.props.onValueChange && prevState.value !== this.state.value) {\n      this.props.onValueChange(this.state.value, prevState.value);\n    }\n  }\n\n  onDateIconClick() {\n    setTimeout(() => {\n      this.showDatepicker();\n    }, 10);\n  }\n\n  onInputKeyDown(e: KeyboardEvent<HTMLInputElement>) {\n    if (e.keyCode === 13) {\n      // return key\n      e.preventDefault();\n      e.stopPropagation();\n      if (e.currentTarget.value !== undefined) {\n        this.setValueFromInput(e.currentTarget.value);\n      }\n      if (this.props.onComplete) {\n        setTimeout(() => {\n          if (this.props.onComplete) {\n            this.props.onComplete();\n          }\n        }, 10);\n      }\n    } else if (e.keyCode === 40) {\n      // down key\n      this.showDatepicker();\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    if (this.props.onKeyDown) {\n      this.props.onKeyDown(e);\n    }\n  }\n\n  onInputChange(e: ChangeEvent<HTMLInputElement>) {\n    const inputValue = e.target.value;\n    this.setState({ inputValue });\n    if (this.props.onChange) {\n      this.props.onChange(e);\n    }\n  }\n\n  onInputBlur(e: FocusEvent<HTMLInputElement | HTMLButtonElement>) {\n    this.setValueFromInput(e.target.value);\n    setTimeout(() => {\n      if (!this.isFocusedInComponent()) {\n        if (this.props.onBlur) {\n          this.props.onBlur();\n        }\n        if (this.props.onComplete) {\n          this.props.onComplete();\n        }\n      }\n    }, 10);\n  }\n\n  onDatepickerSelect(dvalue: string) {\n    const value = moment(dvalue).format(this.getValueFormat());\n    this.setState({ value, inputValue: null });\n    setTimeout(() => {\n      this.setState({ opened: false });\n      const inputEl = this.input;\n      if (inputEl) {\n        inputEl.focus();\n        inputEl.select();\n      }\n      if (this.props.onComplete) {\n        this.props.onComplete();\n      }\n    }, 200);\n  }\n\n  onDatepickerBlur() {\n    this.setState({ opened: false });\n    setTimeout(() => {\n      if (!this.isFocusedInComponent()) {\n        if (this.props.onBlur) {\n          this.props.onBlur();\n        }\n        if (this.props.onComplete) {\n          this.props.onComplete();\n        }\n      }\n    }, 10);\n  }\n\n  onDatepickerClose() {\n    this.setState({ opened: false });\n    const inputEl = this.input;\n    if (inputEl) {\n      inputEl.focus();\n      inputEl.select();\n    }\n  }\n\n  getValueFormat() {\n    return this.props.includeTime ? 'YYYY-MM-DDTHH:mm:ss.SSSZ' : 'YYYY-MM-DD';\n  }\n\n  getInputValueFormat() {\n    return this.props.dateFormat || (this.props.includeTime ? 'L HH:mm' : 'L');\n  }\n\n  setValueFromInput(inputValue: string) {\n    let { value } = this.state;\n    if (!inputValue) {\n      value = '';\n    } else {\n      const mvalue = moment(inputValue, this.getInputValueFormat());\n      if (mvalue.isValid()) {\n        value = mvalue.format(this.getValueFormat());\n      } else {\n        value = '';\n      }\n    }\n    this.setState({ value, inputValue: null });\n  }\n\n  isFocusedInComponent() {\n    const targetEl = document.activeElement;\n    return (\n      isElInChildren(this.node, targetEl) ||\n      isElInChildren(this.datepicker, targetEl)\n    );\n  }\n\n  showDatepicker() {\n    let { value } = this.state;\n    if (this.state.inputValue != null) {\n      const mvalue = moment(this.state.inputValue, this.getInputValueFormat());\n      if (mvalue.isValid()) {\n        value = mvalue.format(this.getValueFormat());\n      } else {\n        // eslint-disable-next-line prefer-destructuring\n        value = this.state.value;\n      }\n    }\n    this.setState({ opened: true, value });\n  }\n\n  renderInput({\n    inputValue,\n    ...props\n  }: { inputValue: string | undefined } & InputProps) {\n    return (\n      <div className='slds-input-has-icon slds-input-has-icon_right'>\n        <Input\n          inputRef={(node) => (this.input = node)}\n          {...props}\n          value={inputValue}\n          onKeyDown={this.onInputKeyDown}\n          onChange={this.onInputChange}\n          onBlur={this.onInputBlur}\n        />\n        <Button\n          type='icon'\n          icon='event'\n          disabled={props.disabled}\n          className='slds-input__icon slds-input__icon_right'\n          tabIndex={-1}\n          onClick={props.disabled ? undefined : this.onDateIconClick}\n          onBlur={this.onInputBlur}\n        />\n      </div>\n    );\n  }\n\n  render() {\n    const id = this.props.id || this.state.id;\n    const {\n      className,\n      totalCols,\n      cols,\n      label,\n      required,\n      error,\n      value,\n      menuAlign,\n      minDate,\n      maxDate,\n      opened,\n      extensionRenderer,\n      /* eslint-disable @typescript-eslint/no-unused-vars */\n      dateFormat,\n      defaultValue,\n      defaultOpened,\n      includeTime,\n      onComplete,\n      onValueChange,\n      /* eslint-enable @typescript-eslint/no-unused-vars */\n      ...props\n    } = this.props;\n    const dateValue = typeof value !== 'undefined' ? value : this.state.value;\n    const mvalue = moment(dateValue || undefined, this.getValueFormat());\n    const inputValue =\n      this.state.inputValue != null\n        ? this.state.inputValue\n        : dateValue != null && mvalue.isValid()\n        ? mvalue.format(this.getInputValueFormat())\n        : undefined;\n    const isOpened = typeof opened !== 'undefined' ? opened : this.state.opened;\n    const formElemProps = { id, totalCols, cols, label, required, error };\n    return (\n      <FormElement\n        formElementRef={(node) => (this.node = node)}\n        {...formElemProps}\n      >\n        <div className={classnames(className, 'slds-dropdown-trigger')}>\n          {this.renderInput({ id, inputValue, ...props })}\n          {isOpened ? (\n            <DatepickerDropdownPortal\n              portalClassName={className}\n              elementRef={(node: HTMLDivElement) => (this.datepicker = node)}\n              dateValue={\n                mvalue.isValid() ? mvalue.format('YYYY-MM-DD') : undefined\n              }\n              minDate={minDate}\n              maxDate={maxDate}\n              align={menuAlign}\n              extensionRenderer={extensionRenderer}\n              onBlur={this.onDatepickerBlur}\n              onSelect={this.onDatepickerSelect}\n              onClose={this.onDatepickerClose}\n            />\n          ) : (\n            undefined\n          )}\n        </div>\n      </FormElement>\n    );\n  }\n}\n"],"file":"DateInput.js"}