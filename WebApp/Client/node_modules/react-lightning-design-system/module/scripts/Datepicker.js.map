{"version":3,"sources":["../../src/scripts/Datepicker.tsx"],"names":["React","Component","classnames","moment","Button","Select","Option","getToday","isElInChildren","createCalendarObject","date","mnDate","mxDate","minDate","maxDate","d","isValid","minD","year","month","value","format","maxD","first","startOf","last","endOf","weeks","days","dd","isBefore","add","push","length","cal","cancelEvent","e","preventDefault","stopPropagation","Datepicker","props","state","onBlur","bind","onKeyDown","autoFocus","targetDate","selectedDate","setTimeout","focusDate","setState","keyCode","onDateClick","shiftKey","onSelect","Number","target","isFocusedInComponent","onClose","el","dateEl","querySelector","focus","node","document","activeElement","onMonthChange","monthsShort","onYearChange","Array","join","split","map","a","i","String","today","weekdaysMin","wd","weekdays","renderDate","selectable","enabled","min","isAfter","max","selected","isToday","dateClassName","undefined","onDateKeyDown","onDateFocus","className","elementRef","ExtensionRenderer","extensionRenderer","datepickerClassNames","handleDOMRef","renderFilter","renderMonth"],"mappings":"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","sourcesContent":["import React, { Component, HTMLAttributes } from 'react';\nimport classnames from 'classnames';\nimport moment from 'moment';\nimport { Button } from './Button';\nimport { Select, Option } from './Select';\nimport { getToday, isElInChildren } from './util';\n\ntype Date = {\n  year: number;\n  month: number;\n  date: number;\n  value: string;\n};\n\ntype Calendar = {\n  year: number;\n  month: number;\n  weeks: Date[][];\n  minDate?: Date;\n  maxDate?: Date;\n};\n\nfunction createCalendarObject(date?: string, mnDate?: string, mxDate?: string) {\n  let minDate;\n  let maxDate;\n  let d = moment(date, 'YYYY-MM-DD');\n  if (!d.isValid()) {\n    d = moment(getToday(), 'YYYY-MM-DD');\n  }\n  if (mnDate) {\n    const minD = moment(mnDate, 'YYYY-MM-DD');\n    if (minD.isValid()) {\n      minDate = {\n        year: minD.year(),\n        month: minD.month(),\n        date: minD.date(),\n        value: minD.format('YYYY-MM-DD'),\n      };\n    }\n  }\n  if (mxDate) {\n    const maxD = moment(mxDate, 'YYYY-MM-DD');\n    if (maxD.isValid()) {\n      maxDate = {\n        year: maxD.year(),\n        month: maxD.month(),\n        date: maxD.date(),\n        value: maxD.format('YYYY-MM-DD'),\n      };\n    }\n  }\n  const year = d.year();\n  const month = d.month();\n  const first = moment(d)\n    .startOf('month')\n    .startOf('week');\n  const last = moment(d)\n    .endOf('month')\n    .endOf('week');\n  const weeks = [];\n  let days = [];\n  for (let dd = first; dd.isBefore(last); dd = dd.add(1, 'd')) {\n    days.push({\n      year: dd.year(),\n      month: dd.month(),\n      date: dd.date(),\n      value: dd.format('YYYY-MM-DD'),\n    });\n    if (days.length === 7) {\n      weeks.push(days);\n      days = [];\n    }\n  }\n  const cal: Calendar = { year, month, weeks };\n  if (minDate) {\n    cal.minDate = minDate;\n  }\n  if (maxDate) {\n    cal.maxDate = maxDate;\n  }\n  return cal;\n}\n\nfunction cancelEvent(e: React.FocusEvent<HTMLSpanElement>) {\n  e.preventDefault();\n  e.stopPropagation();\n}\n\nexport type DatepickerProps = {\n  selectedDate?: string;\n  autoFocus?: boolean;\n  minDate?: string;\n  maxDate?: string;\n  extensionRenderer?: (...props: any[]) => JSX.Element;\n  elementRef?: (node: HTMLDivElement) => void;\n  onSelect?: (date: string) => void;\n  onClose?: () => void;\n} & Omit<HTMLAttributes<HTMLDivElement>, 'onSelect'>;\n\nexport type DatepickerState = {\n  focusDate?: boolean;\n  targetDate?: string;\n};\n\nexport class Datepicker extends Component<DatepickerProps, DatepickerState> {\n  node: HTMLDivElement | null = null;\n\n  month: HTMLTableElement | null = null;\n\n  constructor(props: Readonly<DatepickerProps>) {\n    super(props);\n    this.state = {};\n\n    this.onBlur = this.onBlur.bind(this);\n    this.onKeyDown = this.onKeyDown.bind(this);\n  }\n\n  componentDidMount() {\n    if (this.props.autoFocus) {\n      const targetDate = this.props.selectedDate || getToday();\n      setTimeout(() => {\n        this.focusDate(targetDate);\n      }, 10);\n    }\n  }\n\n  componentDidUpdate() {\n    if (\n      this.state.focusDate &&\n      (this.state.targetDate || this.props.selectedDate)\n    ) {\n      this.focusDate(this.state.targetDate || this.props.selectedDate);\n      /* eslint-disable react/no-did-update-set-state */\n      this.setState({ focusDate: false });\n    }\n  }\n\n  onDateKeyDown(date: string, e: React.KeyboardEvent<HTMLSpanElement>) {\n    let targetDate: any = this.state.targetDate || this.props.selectedDate;\n    if (e.keyCode === 13 || e.keyCode === 32) {\n      // return / space\n      this.onDateClick(date);\n      e.preventDefault();\n      e.stopPropagation();\n    } else if (e.keyCode >= 37 && e.keyCode <= 40) {\n      // cursor key\n      if (e.keyCode === 37) {\n        targetDate = moment(targetDate).add(-1, e.shiftKey ? 'months' : 'days');\n      } else if (e.keyCode === 39) {\n        // right arrow key\n        targetDate = moment(targetDate).add(1, e.shiftKey ? 'months' : 'days');\n      } else if (e.keyCode === 38) {\n        // up arrow key\n        targetDate = moment(targetDate).add(-1, e.shiftKey ? 'years' : 'weeks');\n      } else if (e.keyCode === 40) {\n        // down arrow key\n        targetDate = moment(targetDate).add(1, e.shiftKey ? 'years' : 'weeks');\n      }\n      targetDate = targetDate.format('YYYY-MM-DD');\n      this.setState({ targetDate, focusDate: true });\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  }\n\n  onDateClick(date: string) {\n    if (this.props.onSelect) {\n      this.props.onSelect(date);\n    }\n  }\n\n  onDateFocus(date: string) {\n    if (this.state.targetDate !== date) {\n      setTimeout(() => {\n        this.setState({ targetDate: date });\n      }, 10);\n    }\n  }\n\n  onYearChange(e: React.ChangeEvent<HTMLSelectElement>) {\n    // eslint-disable-next-line react/no-access-state-in-setstate\n    let targetDate = this.state.targetDate || this.props.selectedDate;\n    targetDate = moment(targetDate)\n      .year(Number(e.target.value))\n      .format('YYYY-MM-DD');\n    this.setState({ targetDate });\n  }\n\n  onMonthChange(month: number) {\n    // eslint-disable-next-line react/no-access-state-in-setstate\n    let targetDate = this.state.targetDate || this.props.selectedDate;\n    targetDate = moment(targetDate)\n      .add(month, 'months')\n      .format('YYYY-MM-DD');\n    this.setState({ targetDate });\n  }\n\n  onBlur(e: React.FocusEvent<HTMLDivElement>) {\n    setTimeout(() => {\n      if (!this.isFocusedInComponent()) {\n        if (this.props.onBlur) {\n          this.props.onBlur(e);\n        }\n      }\n    }, 10);\n  }\n\n  onKeyDown(e: React.KeyboardEvent<HTMLDivElement>) {\n    if (e.keyCode === 27) {\n      // ESC\n      if (this.props.onClose) {\n        this.props.onClose();\n      }\n    }\n  }\n\n  focusDate(date: string | undefined) {\n    const el = this.month;\n    if (!el) {\n      return;\n    }\n    const dateEl: HTMLSpanElement | null = el.querySelector(\n      `.slds-day[data-date-value=\"${date}\"]`\n    );\n    if (dateEl) {\n      dateEl.focus();\n    }\n  }\n\n  isFocusedInComponent() {\n    return isElInChildren(this.node, document.activeElement);\n  }\n\n  renderFilter(cal: Calendar) {\n    return (\n      <div className='slds-datepicker__filter slds-grid'>\n        <div className='slds-datepicker__filter_month slds-grid slds-grid_align-spread slds-size_2-of-3'>\n          <div className='slds-align-middle'>\n            <Button\n              className='slds-align-middle'\n              type='icon-container'\n              icon='left'\n              size='small'\n              alt='Previous Month'\n              onClick={this.onMonthChange.bind(this, -1)}\n            />\n          </div>\n          <h2 className='slds-align-middle'>\n            {moment.monthsShort()[cal.month]}\n          </h2>\n          <div className='slds-align-middle'>\n            <Button\n              className='slds-align-middle'\n              type='icon-container'\n              icon='right'\n              size='small'\n              alt='Next Month'\n              onClick={this.onMonthChange.bind(this, 1)}\n            />\n          </div>\n        </div>\n        <div className='slds-size_1-of-3'>\n          <Select value={cal.year} onChange={this.onYearChange.bind(this)}>\n            {new Array(11)\n              .join('_')\n              .split('_')\n              .map((a, i) => {\n                const year = cal.year + i - 5;\n                return <Option key={year} label={String(year)} value={year} />;\n              })}\n          </Select>\n        </div>\n      </div>\n    );\n  }\n\n  renderMonth(cal: Calendar, selectedDate: string | undefined, today: string) {\n    return (\n      <table\n        className='datepicker__month'\n        role='grid'\n        aria-labelledby='month'\n        ref={(node) => (this.month = node)}\n      >\n        <thead>\n          <tr>\n            {moment.weekdaysMin(true).map((wd, i) => (\n              // eslint-disable-next-line react/no-array-index-key\n              <th key={i}>\n                <abbr title={moment.weekdays(true, i)}>{wd}</abbr>\n              </th>\n            ))}\n          </tr>\n        </thead>\n        <tbody>\n          {cal.weeks.map((days, i) => (\n            // eslint-disable-next-line react/no-array-index-key\n            <tr key={i}>\n              {days.map(this.renderDate.bind(this, cal, selectedDate, today))}\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    );\n  }\n\n  renderDate(\n    cal: Calendar,\n    selectedDate: string | undefined,\n    today: string,\n    d: Date,\n    i: number\n  ) {\n    let selectable = true;\n    let enabled = d.year === cal.year && d.month === cal.month;\n    if (cal.minDate) {\n      const min = moment(d.value, 'YYYY-MM-DD').isAfter(\n        moment(cal.minDate.value, 'YYYY-MM-DD')\n      );\n      selectable = selectable && min;\n      enabled = enabled && min;\n    }\n    if (cal.maxDate) {\n      const max = moment(d.value, 'YYYY-MM-DD').isBefore(\n        moment(cal.maxDate.value, 'YYYY-MM-DD')\n      );\n      selectable = selectable && max;\n      enabled = enabled && max;\n    }\n    const selected = d.value === selectedDate;\n    const isToday = d.value === today;\n    const dateClassName = classnames({\n      'slds-disabled-text': !enabled,\n      'slds-is-selected': selected,\n      'slds-is-today': isToday,\n    });\n    return (\n      <td\n        className={dateClassName}\n        key={i}\n        headers={moment.weekdays(i)}\n        role='gridcell'\n        aria-disabled={!enabled}\n        aria-selected={selected}\n      >\n        <span\n          className='slds-day'\n          // eslint-disable-next-line jsx-a11y/no-noninteractive-tabindex\n          tabIndex={selectable ? 0 : -1}\n          onClick={\n            selectable ? this.onDateClick.bind(this, d.value) : undefined\n          }\n          onKeyDown={\n            selectable ? this.onDateKeyDown.bind(this, d.value) : undefined\n          }\n          onFocus={enabled ? this.onDateFocus.bind(this, d.value) : cancelEvent}\n          data-date-value={d.value}\n        >\n          {d.date}\n        </span>\n      </td>\n    );\n  }\n\n  render() {\n    const {\n      className,\n      selectedDate,\n      minDate,\n      maxDate,\n      elementRef,\n      extensionRenderer: ExtensionRenderer,\n      /* eslint-disable @typescript-eslint/no-unused-vars */\n      autoFocus,\n      onSelect,\n      onClose,\n      /* eslint-enable @typescript-eslint/no-unused-vars */\n      ...props\n    } = this.props;\n    const today = getToday();\n    const targetDate = this.state.targetDate || selectedDate;\n    const cal = createCalendarObject(targetDate, minDate, maxDate);\n    const datepickerClassNames = classnames('slds-datepicker', className);\n    const handleDOMRef = (node: HTMLDivElement) => {\n      this.node = node;\n      if (elementRef) {\n        elementRef(node);\n      }\n    };\n    return (\n      <div\n        {...props}\n        className={datepickerClassNames}\n        ref={handleDOMRef}\n        tabIndex={-1}\n        aria-hidden={false}\n        onBlur={this.onBlur}\n        onKeyDown={this.onKeyDown}\n      >\n        {this.renderFilter(cal)}\n        {this.renderMonth(cal, selectedDate, today)}\n        {ExtensionRenderer ? <ExtensionRenderer {...this.props} /> : undefined}\n      </div>\n    );\n  }\n}\n"],"file":"Datepicker.js"}