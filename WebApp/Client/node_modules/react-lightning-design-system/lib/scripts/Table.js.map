{"version":3,"sources":["../../src/scripts/Table.tsx"],"names":["TableHeader","props","children","sortable","hasActions","actionsPosition","nextChildren","className","React","Children","forEach","child","index","childSortable","push","cloneElement","key","slice","renderBaseHeaderRow","Component","TableBody","map","innerChild","isValidElement","truncate","renderRows","TableRow","selected","style","Object","assign","backgroundColor","borderLeft","TableHeaderColumn","resizable","width","sortDir","onSort","sorted","align","pprops","oClassNames","minWidth","icon","e","preventDefault","position","TableRowColumn","undefined","TableRowColumnActions","Table","elements","document","getElementsByClassName","length","childNodes","blur","base","bordered","verticalBorders","noRowHover","striped","fixedLayout","autoWidth","wrapperStyle","tableClassNames","wrapStyle","overflowY","overflowX","tBody","tHead","type","renderTableHeader","renderTableBody","onScroll","bind"],"mappings":"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","sourcesContent":["import React, {\n  Component,\n  CSSProperties,\n  ThHTMLAttributes,\n  HTMLAttributes,\n  TableHTMLAttributes,\n  TdHTMLAttributes,\n} from 'react';\nimport classnames from 'classnames';\n\nimport { Icon } from './Icon';\n\nexport type TableHeaderProps = {\n  hasActions?: boolean;\n  actionsPosition?: number;\n  sortable?: boolean;\n};\n\nexport class TableHeader extends Component<TableHeaderProps> {\n  renderBaseHeaderRow() {\n    const { children, sortable, hasActions, actionsPosition = 0 } = this.props;\n    let nextChildren: any = [];\n\n    const props = {\n      className: 'slds-text-title_caps',\n    };\n\n    React.Children.forEach((children as any).props.children, (child, index) => {\n      const childSortable = child.props.sortable;\n      nextChildren.push(\n        React.cloneElement(child, {\n          // eslint-disable-next-line react/no-array-index-key\n          key: index,\n          sortable:\n            typeof childSortable === 'undefined' ? sortable : childSortable,\n        })\n      );\n    });\n\n    if (hasActions) {\n      nextChildren = [\n        ...nextChildren.slice(0, actionsPosition),\n        <TableHeaderColumn\n          sortable={false}\n          width={50}\n          key={-1}\n          className='slds-cell-shrink'\n        />,\n        ...nextChildren.slice(actionsPosition),\n      ];\n    }\n\n    return React.cloneElement(children as any, props, nextChildren);\n  }\n\n  render() {\n    return <thead>{this.renderBaseHeaderRow()}</thead>;\n  }\n}\n\nexport class TableBody extends Component {\n  renderRows() {\n    return React.Children.map(this.props.children, (child: any) => {\n      const children: any = [];\n\n      React.Children.forEach(child.props.children, (innerChild, index) => {\n        if (!React.isValidElement(innerChild)) return;\n        const { truncate } = innerChild.props as any;\n        const props: any = {\n          key: index,\n        };\n        if (typeof truncate !== 'undefined') props.truncate = truncate;\n        children.push(React.cloneElement(innerChild, props));\n      });\n\n      return React.cloneElement(\n        child,\n        { className: 'slds-hint-parent' },\n        children\n      );\n    });\n  }\n\n  render() {\n    return <tbody>{this.renderRows()}</tbody>;\n  }\n}\n\nexport type TableRowProps = {\n  selected?: boolean;\n  style?: object;\n} & HTMLAttributes<HTMLTableRowElement>;\n\nexport const TableRow: React.FC<TableRowProps> = ({ selected, ...props }) => {\n  let { style } = props;\n\n  if (selected) {\n    style = Object.assign({}, style, {\n      backgroundColor: '#F8FCF5',\n      borderLeft: '2px solid #7db450',\n    });\n  }\n\n  return (\n    <tr {...props} style={style}>\n      {props.children}\n    </tr>\n  );\n};\n\nexport type TableHeaderColumnProps = {\n  className?: string;\n  width?: string | number;\n  sortable?: boolean;\n  resizable?: boolean;\n  sortDir?: string;\n  sorted?: boolean;\n  align?: 'left' | 'center' | 'right';\n  onSort?: () => void;\n} & ThHTMLAttributes<HTMLTableHeaderCellElement>;\n\nexport const TableHeaderColumn: React.FC<TableHeaderColumnProps> = (props) => {\n  const {\n    sortable,\n    resizable,\n    children,\n    className,\n    width,\n    sortDir,\n    onSort,\n    sorted,\n    align,\n    ...pprops\n  } = props;\n  const oClassNames = classnames(\n    className,\n    'slds-text-title_caps slds-truncate',\n    {\n      'slds-is-sortable': sortable,\n      'slds-is-resizable': resizable,\n      'slds-is-sorted': sorted,\n      [`slds-text-align_${align}`]: align,\n    }\n  );\n\n  const style = { minWidth: width || 'auto' };\n\n  const icon = sortDir === 'DESC' ? 'arrowdown' : 'arrowup';\n\n  return (\n    <th {...pprops} className={oClassNames} scope='col' style={style}>\n      {sortable ? (\n        <a\n          onClick={(e) => {\n            e.preventDefault();\n            if (onSort) {\n              onSort();\n            }\n          }}\n          className='slds-th__action slds-text-link_reset'\n        >\n          <span className='slds-assistive-text'>Sort </span>\n          <span className='slds-truncate'>{children}</span>\n          <Icon\n            className='slds-is-sortable__icon'\n            textColor='default'\n            container\n            size='x-small'\n            category='utility'\n            icon={icon}\n            style={{ position: 'absolute' }}\n          />\n          <span\n            className='slds-assistive-text'\n            aria-live='assertive'\n            aria-atomic='true'\n          />\n        </a>\n      ) : (\n        children\n      )}\n    </th>\n  );\n};\n\nexport type TableRowColumnProps = {\n  width?: string | number;\n  truncate?: boolean;\n} & TdHTMLAttributes<HTMLTableDataCellElement>;\n\nexport const TableRowColumn: React.FC<TableRowColumnProps> = (props) => {\n  const { truncate = true, className, width, children, ...pprops } = props;\n  const oClassNames = classnames(className, {\n    'slds-truncate': truncate,\n  });\n  const style: CSSProperties = {};\n  if (width !== undefined) style.width = width;\n  if (!truncate) style.position = 'static';\n\n  return (\n    <td role='gridcell' style={style} className={oClassNames} {...pprops}>\n      {children}\n    </td>\n  );\n};\n\nexport const TableRowColumnActions: React.FC = (props) => (\n  <TableRowColumn\n    className='slds-cell-shrink'\n    data-label='Actions'\n    truncate={false}\n    width={50}\n    style={{ position: 'static' }}\n  >\n    {props.children}\n  </TableRowColumn>\n);\n\nexport type TableProps = {\n  wrapperStyle?: CSSProperties;\n  bordered?: boolean;\n  verticalBorders?: boolean;\n  noRowHover?: boolean;\n  striped?: boolean;\n  fixedLayout?: boolean;\n  sortable?: boolean;\n  autoWidth?: boolean;\n} & TableHTMLAttributes<HTMLTableElement>;\n\nexport class Table extends Component<TableProps> {\n  onScroll() {\n    const elements = document.getElementsByClassName(\n      'react-slds-dropdown-opened'\n    );\n    if (elements.length) (elements[0].childNodes[0] as any).blur();\n  }\n\n  renderTableHeader(base: any) {\n    const { sortable } = this.props;\n    return React.cloneElement(base, { sortable });\n  }\n\n  renderTableBody(base: any) {\n    return base;\n  }\n\n  render() {\n    const {\n      className,\n      bordered,\n      verticalBorders,\n      noRowHover,\n      striped,\n      fixedLayout,\n      children,\n      autoWidth,\n      wrapperStyle,\n      ...pprops\n    } = this.props;\n    delete pprops.sortable;\n\n    const tableClassNames = classnames(\n      className,\n      'slds-table slds-table_cell-buffer',\n      {\n        'slds-table_bordered': bordered,\n        'slds-no-row-hover': noRowHover,\n        'slds-table_striped': striped,\n        'slds-table_fixed-layout': fixedLayout,\n        'slds-table_col-bordered': verticalBorders,\n      }\n    );\n\n    const wrapStyle: CSSProperties = Object.assign(\n      {\n        overflowY: 'hidden',\n        overflowX: 'auto',\n      },\n      wrapperStyle\n    );\n\n    const style: CSSProperties = {};\n    if (autoWidth) style.width = 'auto';\n\n    let tBody;\n    let tHead;\n\n    React.Children.forEach(children, (child) => {\n      if (!React.isValidElement(child)) return;\n      if (child.type === TableHeader) {\n        tHead = this.renderTableHeader(child);\n      } else if (child.type === TableBody) {\n        tBody = this.renderTableBody(child);\n      }\n    });\n\n    return (\n      <div>\n        <div style={wrapStyle} onScroll={this.onScroll.bind(this)}>\n          <table className={tableClassNames} style={style} {...pprops}>\n            {tHead}\n            {tBody}\n          </table>\n        </div>\n      </div>\n    );\n  }\n}\n"],"file":"Table.js"}