{"version":3,"sources":["../../src/scripts/Lookup.tsx"],"names":["LookupSelection","e","keyCode","preventDefault","stopPropagation","props","onResetSelection","selected","onPillClick","currentTarget","focus","id","node","pill","onKeyDown","icon","category","undefined","label","hidden","lookupSelectionRef","lookupClassNames","renderPill","Component","LookupSearch","onSubmit","searchText","value","onComplete","onPressDown","cancel","target","onSearchTextChange","setTimeout","isFocusedInComponent","onBlur","lookupSearchRef","document","activeElement","className","iconAlign","scopes","targetScope","onScopeMenuClick","onScopeSelect","onValueChange","pprops","searchInputClassNames","handleLookupSearchRef","input","onInputKeyDown","onInputChange","onInputBlur","disabled","onLookupIconClick","scope","selectorClassNames","v","String","map","lookupSearchClassNames","styles","WebkitFlexWrap","msFlexWrap","flexWrap","renderScopeSelector","renderSearchInput","bare","LookupCandidateList","currentEl","parentElement","itemEl","nextSibling","previousSibling","anchorEl","querySelector","onSelect","entry","meta","display","alignItems","minWidth","focusToTargetItemEl","prevProps","index","el","anchors","querySelectorAll","trueFilter","data","loading","header","footer","filter","alignment","listRef","lookupMenuClassNames","vertAlign","align","listStyles","bottom","left","right","handleDOMRef","renderCandidate","height","margin","LookupCandidateListPortal","triggerSelector","alignmentStyle","Lookup","setState","opened","onLookupRequest","state","defaultSelected","defaultOpened","defaultSearchText","defaultTargetScope","focusFirstCandidate","searchElem","search","inputElem","selectionElem","selection","pillElem","targetEl","candidateList","totalCols","cols","required","error","lookupFilter","listHeader","listFooter","formElemProps","searchProps","bind","onFocusFirstCandidate","onLookupItemSelect"],"mappings":"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","sourcesContent":["import React, {\n  Component,\n  InputHTMLAttributes,\n  ChangeEvent,\n  KeyboardEvent,\n  SyntheticEvent,\n  MouseEvent,\n} from 'react';\nimport classnames from 'classnames';\nimport { autoAlign, InjectedProps, AutoAlignProps } from './AutoAlign';\nimport { Button } from './Button';\nimport { FormElement, FormElementProps } from './FormElement';\nimport { Input, InputProps } from './Input';\nimport { Icon, IconCategory } from './Icon';\nimport { Spinner } from './Spinner';\nimport { Pill } from './Pill';\nimport { DropdownButton } from './DropdownButton';\nimport { DropdownMenuItem } from './DropdownMenu';\nimport { uuid, isElInChildren, registerStyle } from './util';\n\n/**\n *\n */\ntype Entry = {\n  label: string;\n  value: string;\n  icon?: string;\n  scope?: string;\n  category?: IconCategory;\n  meta?: string;\n};\n\nexport type LookupEntry = Entry;\n\nexport type LookupSelectionProps<LookupEntry extends Entry> = {\n  id?: string;\n  selected?: LookupEntry;\n  hidden?: boolean;\n  onResetSelection?: (e?: any) => void;\n  lookupSelectionRef?: (node: HTMLDivElement) => void;\n};\n\n/**\n *\n */\nexport class LookupSelection<LookupEntry extends Entry> extends Component<\n  LookupSelectionProps<LookupEntry>\n> {\n  pill: HTMLElement | null = null;\n\n  onKeyDown = (e: KeyboardEvent<HTMLElement>) => {\n    if (e.keyCode === 8 || e.keyCode === 46) {\n      // Bacspace / DEL\n      e.preventDefault();\n      e.stopPropagation();\n      if (this.props.onResetSelection) {\n        this.props.onResetSelection();\n      }\n    }\n  };\n\n  renderPill(selected: LookupEntry) {\n    const onPillClick = (e: MouseEvent<HTMLSpanElement>) => {\n      e.currentTarget.focus();\n      e.preventDefault();\n      e.stopPropagation();\n    };\n    return (\n      <Pill\n        id={this.props.id}\n        truncate\n        pillRef={(node) => (this.pill = node)}\n        onKeyDown={this.onKeyDown}\n        onClick={onPillClick}\n        tabIndex={0}\n        icon={\n          selected.icon\n            ? {\n                category: selected.category,\n                icon: selected.icon,\n              }\n            : undefined\n        }\n        label={selected.label}\n        onRemove={this.props.onResetSelection}\n      />\n    );\n  }\n\n  render() {\n    const { hidden, selected, lookupSelectionRef } = this.props;\n    const lookupClassNames = classnames({ 'slds-hide': hidden });\n    return (\n      <div ref={lookupSelectionRef} className={lookupClassNames}>\n        <div className='slds-pill__container'>\n          {selected ? this.renderPill(selected) : undefined}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport type LookupScope = {\n  label: string;\n  value: string;\n  icon: string;\n};\n\nexport type LookupSearchProps = Omit<\n  InputProps,\n  'value' | 'defaultValue' | 'onChange' | 'onSelect'\n> & {\n  hidden?: boolean;\n  searchText?: string;\n  scopes?: LookupScope[];\n  targetScope?: any;\n  iconAlign?: 'left' | 'right';\n  disabled?: boolean;\n  onBlur?: () => void;\n  onSearchTextChange?: (searchText: string) => void;\n  onScopeMenuClick?: (e: SyntheticEvent<HTMLButtonElement>) => void;\n  onScopeSelect?: (value: string) => void;\n  onPressDown?: () => void;\n  onSubmit?: () => void;\n  onComplete?: (cancel?: boolean) => void;\n  lookupSearchRef?: (node: HTMLDivElement) => void;\n};\n\n/**\n *\n */\nexport class LookupSearch extends Component<LookupSearchProps> {\n  input: HTMLInputElement | null = null;\n\n  node: HTMLDivElement | null = null;\n\n  constructor(props: Readonly<LookupSearchProps>) {\n    super(props);\n    /* eslint-disable max-len */\n    registerStyle('lookupSearch', [\n      [\n        '.slds-lookup[data-scope=\"multi\"] .react-slds-lookup-scope-selector',\n        '{ min-width: 3rem; }',\n      ],\n      [\n        '.slds-lookup[data-scope=\"multi\"] .react-slds-lookup-scope-selector .slds-dropdown-trigger',\n        '{ margin-left: 0; }',\n      ],\n      [\n        '.slds-lookup[data-scope=\"multi\"] .react-slds-lookup-scope-selector .slds-dropdown-trigger .slds-button',\n        '{ padding: 0 0.25rem; }',\n      ],\n      [\n        '.slds-lookup[data-scope=\"multi\"] .slds-box_border',\n        '{ background-color: white; }',\n      ],\n      [\n        '.slds-lookup[data-scope=\"multi\"] .slds-box_border.react-slds-box-disabled',\n        '{ background-color: #e0e5ee; border-color: #a8b7c7; cursor: not-allowed; }',\n      ],\n      [\n        '.slds-lookup[data-scope=\"multi\"] .slds-box_border .slds-input_bare',\n        '{ height: 2.15rem; width: 100%; }',\n      ],\n    ]);\n  }\n\n  onLookupIconClick = () => {\n    if (this.props.onSubmit) {\n      this.props.onSubmit();\n    }\n  };\n\n  onInputKeyDown = (e: KeyboardEvent<HTMLInputElement>) => {\n    if (e.keyCode === 13) {\n      // return key\n      e.preventDefault();\n      e.stopPropagation();\n      const searchText = e.currentTarget.value;\n      if (searchText) {\n        if (this.props.onSubmit) {\n          this.props.onSubmit();\n        }\n      } else if (this.props.onComplete) {\n        // if no search text, quit lookup search\n        this.props.onComplete();\n      }\n    } else if (e.keyCode === 40) {\n      // down key\n      e.preventDefault();\n      e.stopPropagation();\n      if (this.props.onPressDown) {\n        this.props.onPressDown();\n      }\n    } else if (e.keyCode === 27) {\n      // ESC\n      e.preventDefault();\n      e.stopPropagation();\n      // quit lookup search (cancel)\n      const cancel = true;\n      if (this.props.onComplete) {\n        this.props.onComplete(cancel);\n      }\n    }\n    if (this.props.onKeyDown) {\n      this.props.onKeyDown(e);\n    }\n  };\n\n  onInputChange = (e: ChangeEvent<HTMLInputElement>) => {\n    const searchText = e.target.value;\n    if (this.props.onSearchTextChange) {\n      this.props.onSearchTextChange(searchText);\n    }\n  };\n\n  onInputBlur = () => {\n    setTimeout(() => {\n      if (!this.isFocusedInComponent()) {\n        if (this.props.onBlur) {\n          this.props.onBlur();\n        }\n      }\n    }, 10);\n  };\n\n  handleLookupSearchRef = (node: HTMLDivElement) => {\n    this.node = node;\n    const { lookupSearchRef } = this.props;\n    if (lookupSearchRef) {\n      lookupSearchRef(node);\n    }\n  };\n\n  isFocusedInComponent() {\n    return isElInChildren(this.node, document.activeElement);\n  }\n\n  renderSearchInput(props: LookupSearchProps & {}) {\n    const {\n      className,\n      hidden,\n      searchText,\n      iconAlign = 'right',\n      /* eslint-disable @typescript-eslint/no-unused-vars */\n      scopes,\n      targetScope,\n      onScopeMenuClick,\n      onScopeSelect,\n      onSearchTextChange,\n      onPressDown,\n      onValueChange,\n      onComplete,\n      lookupSearchRef,\n      /* eslint-enable @typescript-eslint/no-unused-vars */\n      ...pprops\n    } = props;\n    const searchInputClassNames = classnames(\n      'slds-grid',\n      'slds-input-has-icon',\n      `slds-input-has-icon_${iconAlign}`,\n      { 'slds-hide': hidden },\n      className\n    );\n    return (\n      <div ref={this.handleLookupSearchRef} className={searchInputClassNames}>\n        <Input\n          {...pprops}\n          inputRef={(node) => (this.input = node)}\n          value={searchText}\n          onKeyDown={this.onInputKeyDown}\n          onChange={this.onInputChange}\n          onBlur={this.onInputBlur}\n        />\n        <Button\n          type='icon'\n          icon='search'\n          disabled={props.disabled}\n          className='slds-input__icon slds-input__icon_right'\n          tabIndex={-1}\n          onClick={props.disabled ? undefined : this.onLookupIconClick}\n          onBlur={this.onInputBlur}\n        />\n      </div>\n    );\n  }\n\n  renderScopeSelector({ scopes, targetScope: target, disabled }: any) {\n    let targetScope = scopes[0] || {};\n    for (const scope of scopes) {\n      if (scope.value === target) {\n        targetScope = scope;\n        break;\n      }\n    }\n    const icon = <Icon icon={targetScope.icon || 'none'} size='x-small' />;\n    const selectorClassNames = classnames(\n      'slds-grid',\n      'slds-grid_align-center',\n      'slds-grid_vertical-align-center',\n      'react-slds-lookup-scope-selector'\n    );\n    const { onScopeMenuClick, onScopeSelect } = this.props;\n    return (\n      <div className={selectorClassNames}>\n        <DropdownButton\n          label={icon}\n          disabled={disabled}\n          onClick={onScopeMenuClick}\n          onMenuSelect={(v: string | number) =>\n            onScopeSelect && onScopeSelect(String(v))\n          }\n          onBlur={this.onInputBlur}\n        >\n          {scopes.map((scope: LookupScope) => (\n            <DropdownMenuItem\n              key={scope.value}\n              eventKey={scope.value}\n              label={scope.label}\n              icon={scope.icon}\n            />\n          ))}\n        </DropdownButton>\n      </div>\n    );\n  }\n\n  render() {\n    const { scopes, hidden, disabled, targetScope, ...props } = this.props;\n    if (scopes) {\n      const lookupSearchClassNames = classnames(\n        'slds-grid',\n        'slds-form-element__control',\n        'slds-box_border',\n        { 'react-slds-box-disabled': disabled },\n        { 'slds-hide': hidden }\n      );\n      const styles = {\n        WebkitFlexWrap: 'nowrap' as const,\n        msFlexWrap: 'nowrap',\n        flexWrap: 'nowrap' as const,\n      };\n      return (\n        <div\n          ref={this.handleLookupSearchRef}\n          className={lookupSearchClassNames}\n          style={styles}\n        >\n          {this.renderScopeSelector({ scopes, targetScope, disabled })}\n          {this.renderSearchInput({\n            ...props,\n            disabled,\n            className: 'slds-col',\n            bare: true,\n          })}\n        </div>\n      );\n    }\n    return this.renderSearchInput(this.props);\n  }\n}\n\ntype LookupCandidateListInternalProps<LookupEntry extends Entry> = {\n  data?: LookupEntry[];\n  focus?: boolean;\n  loading?: boolean;\n  filter?: (entry: LookupEntry) => boolean;\n  listRef?: (node: HTMLDivElement) => void;\n  onSelect?: (entry: LookupEntry | null) => void;\n  onBlur?: (e: React.FocusEvent<HTMLAnchorElement>) => void;\n  header?: JSX.Element;\n  footer?: JSX.Element;\n};\n\nexport type LookupCandidateListProps<\n  LookupEntry extends Entry\n> = LookupCandidateListInternalProps<LookupEntry> & InjectedProps;\n\n/**\n *\n */\nclass LookupCandidateList<LookupEntry extends Entry> extends Component<\n  LookupCandidateListProps<LookupEntry>\n> {\n  node: HTMLDivElement | null = null;\n\n  componentDidMount() {\n    if (this.props.focus) {\n      this.focusToTargetItemEl(0);\n    }\n  }\n\n  componentDidUpdate(\n    prevProps: Readonly<LookupCandidateListProps<LookupEntry>>\n  ) {\n    if (this.props.focus && !prevProps.focus) {\n      setTimeout(() => {\n        this.focusToTargetItemEl(0);\n      }, 10);\n    }\n  }\n\n  onSelect(entry: LookupEntry | null) {\n    if (this.props.onSelect) {\n      this.props.onSelect(entry);\n    }\n  }\n\n  onKeyDown = (e: KeyboardEvent<HTMLElement>) => {\n    if (e.keyCode === 38 || e.keyCode === 40) {\n      // UP/DOWN\n      e.preventDefault();\n      e.stopPropagation();\n      const currentEl = (e.target as HTMLElement).parentElement;\n      let itemEl: any = currentEl\n        ? e.keyCode === 40\n          ? currentEl.nextSibling\n          : currentEl.previousSibling\n        : null;\n      while (itemEl) {\n        const anchorEl = itemEl.querySelector(\n          '.react-slds-candidate[tabIndex]'\n        );\n        if (anchorEl && !anchorEl.disabled) {\n          anchorEl.focus();\n          return;\n        }\n        itemEl = e.keyCode === 40 ? itemEl.nextSibling : itemEl.previousSibling;\n      }\n    } else if (e.keyCode === 27) {\n      // ESC\n      e.preventDefault();\n      e.stopPropagation();\n      this.onSelect(null);\n    }\n  };\n\n  focusToTargetItemEl(index: number) {\n    const el = this.node;\n    if (!el) {\n      return;\n    }\n    const anchors = el.querySelectorAll<HTMLAnchorElement>(\n      '.react-slds-candidate[tabIndex]'\n    );\n    if (anchors[index]) {\n      anchors[index].focus();\n    }\n  }\n\n  renderCandidate = (entry: LookupEntry) => {\n    const { category, icon, label, value, meta } = entry;\n    return (\n      <li key={value} role='presentation'>\n        <a\n          className='slds-lookup__item-action react-slds-candidate'\n          tabIndex={-1}\n          role='option'\n          aria-selected={false}\n          onKeyDown={(e) => e.keyCode === 13 && this.onSelect(entry)}\n          onBlur={this.props.onBlur}\n          onClick={() => this.onSelect(entry)}\n        >\n          <span\n            className='slds-truncate'\n            style={{ display: 'inline-flex', alignItems: 'center' }}\n          >\n            {icon ? (\n              <Icon\n                style={{ minWidth: '1.5rem' }}\n                className='slds-m-right_x-small'\n                category={category}\n                icon={icon}\n                size='small'\n              />\n            ) : (\n              undefined\n            )}\n            <div className='slds-truncate'>\n              <span className='slds-lookup__result-text slds-truncate'>\n                {label}\n              </span>\n              {meta ? (\n                <span className='slds-lookup__result-meta slds-truncate'>\n                  {meta}\n                </span>\n              ) : (\n                undefined\n              )}\n            </div>\n          </span>\n        </a>\n      </li>\n    );\n  };\n\n  render() {\n    const trueFilter = () => true;\n    const {\n      data = [],\n      loading,\n      header,\n      footer,\n      filter = trueFilter,\n      alignment,\n      listRef,\n    } = this.props;\n    const lookupMenuClassNames = classnames('slds-lookup__menu', 'slds-show');\n    const [vertAlign, align] = alignment;\n    const listStyles = {\n      minWidth: '15rem',\n      ...(vertAlign === 'bottom' ? { bottom: '100%' } : {}),\n      ...(align === 'right' ? { left: 'auto', right: 0 } : {}),\n    };\n    const handleDOMRef = (node: HTMLDivElement) => {\n      this.node = node;\n      if (listRef) {\n        listRef(node);\n      }\n    };\n    return (\n      // eslint-disable-next-line jsx-a11y/interactive-supports-focus\n      <div\n        ref={handleDOMRef}\n        className={lookupMenuClassNames}\n        style={listStyles}\n        role='listbox'\n        onKeyDown={this.onKeyDown}\n      >\n        {header ? <div className='slds-lookup__item'>{header}</div> : undefined}\n        <ul className='slds-lookup__list' role='presentation'>\n          {data.filter(filter).map(this.renderCandidate)}\n          {loading ? (\n            <li\n              className='slds-lookup__item'\n              key='loading'\n              style={{ height: 20 }}\n            >\n              <Spinner\n                container={false}\n                size='small'\n                style={{ margin: '0 auto' }}\n              />\n            </li>\n          ) : (\n            undefined\n          )}\n        </ul>\n        {footer ? <div className='slds-lookup__item'>{footer}</div> : undefined}\n      </div>\n    );\n  }\n}\n\ntype LookupCandidateListPortalType = <LookupEntry extends Entry>(\n  props: LookupCandidateListInternalProps<LookupEntry> & AutoAlignProps\n) => JSX.Element;\n\nconst LookupCandidateListPortal: LookupCandidateListPortalType = (autoAlign({\n  triggerSelector: '.slds-lookup',\n  alignmentStyle: 'menu',\n})(LookupCandidateList) as unknown) as LookupCandidateListPortalType;\n\nexport type LookupProps<\n  LookupEntry extends Entry,\n  SelectedEntry extends LookupEntry\n> = {\n  label?: string;\n  disabled?: boolean;\n  required?: boolean;\n  error?: FormElementProps['error'];\n  iconAlign?: 'left' | 'right';\n\n  value?: string | null;\n  defaultValue?: string | null;\n\n  selected?: SelectedEntry | null;\n  defaultSelected?: SelectedEntry | null;\n\n  opened?: boolean;\n  defaultOpened?: boolean;\n\n  searchText?: string;\n  defaultSearchText?: string;\n\n  loading?: boolean;\n  data?: LookupEntry[];\n  lookupFilter?: (\n    entry: LookupEntry,\n    searchText?: string,\n    targetScope?: string\n  ) => boolean;\n  listHeader?: JSX.Element;\n  listFooter?: JSX.Element;\n  scopes?: LookupScope[];\n  targetScope?: string;\n  defaultTargetScope?: string;\n  totalCols?: number;\n  cols?: number;\n\n  onSearchTextChange?: (searchText: string) => void;\n  onScopeMenuClick?: (e: SyntheticEvent<HTMLButtonElement>) => void;\n  onScopeSelect?: (targetScope: string) => void;\n  onLookupRequest?: (searchText: string) => void;\n  onBlur?: () => void;\n  onFocus?: () => void;\n  onSelect?: (entry: LookupEntry | null) => void;\n  onComplete?: (cancel?: boolean) => void;\n} & Omit<\n  InputHTMLAttributes<HTMLInputElement>,\n  'onChange' | 'onBlur' | 'onFocus' | 'onSelect'\n>;\n\nexport type LookupState<LookupEntry extends Entry> = {\n  id: string;\n  selected?: LookupEntry | null;\n  opened?: boolean;\n  searchText?: string;\n  targetScope?: string;\n  focusFirstCandidate: boolean;\n};\n\n/**\n *\n */\nexport class Lookup<\n  LookupEntry extends Entry,\n  SelectedEntry extends LookupEntry\n> extends Component<\n  LookupProps<LookupEntry, SelectedEntry>,\n  LookupState<LookupEntry>\n> {\n  static isFormElement = true;\n\n  node: HTMLDivElement | null = null;\n\n  selection: HTMLDivElement | null = null;\n\n  candidateList: HTMLDivElement | null = null;\n\n  // eslint-disable-next-line react/sort-comp\n  private search: any;\n\n  constructor(props: Readonly<LookupProps<LookupEntry, SelectedEntry>>) {\n    super(props);\n    this.state = {\n      id: `form-element-${uuid()}`,\n      selected: props.defaultSelected,\n      opened: props.defaultOpened,\n      searchText: props.defaultSearchText,\n      targetScope: props.defaultTargetScope,\n      focusFirstCandidate: false,\n    };\n  }\n\n  onScopeMenuClick = (e: SyntheticEvent<HTMLButtonElement>) => {\n    this.setState({ opened: false });\n    if (this.props.onScopeMenuClick) {\n      this.props.onScopeMenuClick(e);\n    }\n  };\n\n  onScopeSelect = (targetScope: string) => {\n    this.setState({ targetScope });\n    if (this.props.onScopeSelect) {\n      this.props.onScopeSelect(targetScope);\n    }\n  };\n\n  onSearchTextChange = (searchText: string) => {\n    this.setState({ searchText });\n    if (this.props.onSearchTextChange) {\n      this.props.onSearchTextChange(searchText);\n    }\n  };\n\n  onLookupRequest = (searchText: string) => {\n    this.setState({ opened: true });\n    if (this.props.onLookupRequest) {\n      this.props.onLookupRequest(searchText);\n    }\n  };\n\n  onResetSelection() {\n    this.setState({ selected: null });\n    if (this.props.onSelect) {\n      this.props.onSelect(null);\n    }\n    this.onSearchTextChange('');\n    this.onLookupRequest('');\n    setTimeout(() => {\n      const searchElem = this.search;\n      const inputElem = searchElem && searchElem.querySelector('input');\n      if (!inputElem) {\n        return;\n      }\n      inputElem.focus();\n    }, 10);\n  }\n\n  onLookupItemSelect(selected: LookupEntry | null) {\n    if (selected) {\n      this.setState({ selected, opened: false });\n      if (this.props.onSelect) {\n        this.props.onSelect(selected);\n      }\n      setTimeout(() => {\n        const selectionElem = this.selection;\n        const pillElem = selectionElem && selectionElem.querySelector('a');\n        if (pillElem) {\n          pillElem.focus();\n        }\n      }, 10);\n    } else {\n      this.setState({ opened: false });\n      setTimeout(() => {\n        const searchElem = this.search;\n        const inputElem = searchElem.querySelector('input');\n        inputElem.focus();\n      }, 10);\n    }\n    if (this.props.onComplete) {\n      this.props.onComplete(); // tell the component container to quit lookup\n    }\n  }\n\n  onFocusFirstCandidate() {\n    const { opened = this.state.opened } = this.props;\n    if (!opened) {\n      this.onLookupRequest(this.state.searchText || '');\n    } else {\n      this.setState({ focusFirstCandidate: true });\n      setTimeout(() => {\n        this.setState({ focusFirstCandidate: false });\n      }, 10);\n    }\n  }\n\n  onBlur() {\n    setTimeout(() => {\n      if (!this.isFocusedInComponent()) {\n        this.setState({ opened: false });\n        if (this.props.onBlur) {\n          this.props.onBlur();\n        }\n        if (this.props.onComplete) {\n          this.props.onComplete(true); // quit lookup (cancel)\n        }\n      }\n    }, 10);\n  }\n\n  isFocusedInComponent() {\n    const targetEl = document.activeElement;\n    return (\n      isElInChildren(this.node, targetEl) ||\n      isElInChildren(this.candidateList, targetEl)\n    );\n  }\n\n  render() {\n    const id = this.props.id || this.state.id;\n    const {\n      totalCols,\n      cols,\n      label,\n      required,\n      error,\n      className,\n      selected = this.state.selected,\n      opened = this.state.opened,\n      searchText = this.state.searchText,\n      targetScope = this.state.targetScope,\n      loading,\n      lookupFilter,\n      listHeader,\n      listFooter,\n      data,\n      onComplete,\n      ...props\n    } = this.props;\n    const lookupClassNames = classnames(\n      'slds-lookup',\n      { 'slds-has-selection': selected },\n      className\n    );\n    const formElemProps = { id, totalCols, cols, label, required, error };\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    const {\n      defaultSelected,\n      defaultOpened,\n      defaultSearchText,\n      defaultTargetScope,\n      onSelect,\n      onBlur,\n      onScopeSelect,\n      onScopeMenuClick,\n      onSearchTextChange,\n      onLookupRequest,\n      ...searchProps\n    } = props;\n    /* eslint-enable @typescript-eslint/no-unused-vars */\n    return (\n      <FormElement\n        formElementRef={(node) => (this.node = node)}\n        {...formElemProps}\n      >\n        <div\n          className={lookupClassNames}\n          ref={(node) => (this.node = node)}\n          data-select='single'\n          data-scope={props.scopes ? 'multi' : 'single'}\n          data-typeahead={false}\n        >\n          {selected ? (\n            <LookupSelection\n              id={id}\n              lookupSelectionRef={(node) => (this.selection = node)}\n              selected={selected}\n              onResetSelection={this.onResetSelection.bind(this)}\n            />\n          ) : (\n            <LookupSearch\n              {...searchProps}\n              id={id}\n              lookupSearchRef={(node) => (this.search = node)}\n              searchText={searchText}\n              targetScope={targetScope}\n              onScopeMenuClick={this.onScopeMenuClick}\n              onScopeSelect={this.onScopeSelect}\n              onSearchTextChange={this.onSearchTextChange}\n              onSubmit={() => this.onLookupRequest(searchText || '')}\n              onPressDown={this.onFocusFirstCandidate.bind(this)}\n              onComplete={onComplete}\n              onBlur={this.onBlur.bind(this)}\n            />\n          )}\n          {opened ? (\n            <LookupCandidateListPortal\n              portalClassName={lookupClassNames}\n              listRef={(node) => (this.candidateList = node)}\n              data={data}\n              focus={this.state.focusFirstCandidate}\n              loading={loading}\n              filter={\n                lookupFilter\n                  ? (entry: LookupEntry) =>\n                      lookupFilter(entry, searchText, targetScope)\n                  : undefined\n              }\n              header={listHeader}\n              footer={listFooter}\n              onSelect={this.onLookupItemSelect.bind(this)}\n              onBlur={this.onBlur.bind(this)}\n            />\n          ) : (\n            undefined\n          )}\n        </div>\n      </FormElement>\n    );\n  }\n}\n"],"file":"Lookup.js"}