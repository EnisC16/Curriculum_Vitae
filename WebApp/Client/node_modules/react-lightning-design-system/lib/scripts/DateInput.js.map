{"version":3,"sources":["../../src/scripts/DateInput.tsx"],"names":["DatepickerDropdown","props","className","alignment","dateValue","minDate","maxDate","extensionRenderer","elementRef","onSelect","onBlur","onClose","vertAlign","align","datepickerClassNames","undefined","handleDOMRef","node","Component","DatepickerDropdownPortal","triggerSelector","alignmentStyle","DateInput","state","id","opened","defaultOpened","value","defaultValue","inputValue","onDateIconClick","bind","onInputKeyDown","onInputChange","onInputBlur","onDatepickerSelect","onDatepickerBlur","onDatepickerClose","prevProps","prevState","onValueChange","setTimeout","showDatepicker","e","keyCode","preventDefault","stopPropagation","currentTarget","setValueFromInput","onComplete","onKeyDown","target","setState","onChange","isFocusedInComponent","dvalue","format","getValueFormat","inputEl","input","focus","select","includeTime","dateFormat","mvalue","getInputValueFormat","isValid","targetEl","document","activeElement","datepicker","disabled","totalCols","cols","label","required","error","menuAlign","isOpened","formElemProps","renderInput"],"mappings":"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","sourcesContent":["import React, {\n  Component,\n  KeyboardEvent,\n  ChangeEvent,\n  FocusEvent,\n} from 'react';\nimport classnames from 'classnames';\nimport moment from 'moment';\nimport { autoAlign, InjectedProps } from './AutoAlign';\nimport { Button } from './Button';\nimport { FormElement } from './FormElement';\nimport { Input, InputProps } from './Input';\nimport { Datepicker } from './Datepicker';\nimport { uuid, isElInChildren, registerStyle } from './util';\n\ntype DatepickerDropdownProps = {\n  className?: string;\n  dateValue?: string;\n  minDate?: string;\n  maxDate?: string;\n  elementRef?: (node: HTMLDivElement) => void;\n  extensionRenderer?: (...props: any[]) => JSX.Element;\n  onSelect?: (date: string) => void;\n  onBlur?: (e: React.FocusEvent<HTMLDivElement>) => void;\n  onClose?: () => void;\n} & InjectedProps;\n\n/**\n *\n */\nclass DatepickerDropdown extends Component<DatepickerDropdownProps> {\n  node: HTMLDivElement | null = null;\n\n  render() {\n    const {\n      className,\n      alignment,\n      dateValue,\n      minDate,\n      maxDate,\n      extensionRenderer,\n      elementRef,\n      onSelect,\n      onBlur,\n      onClose,\n    } = this.props;\n    const [vertAlign, align] = alignment;\n    const datepickerClassNames = classnames(\n      className,\n      'slds-dropdown',\n      align ? `slds-dropdown_${align}` : undefined,\n      vertAlign ? `slds-dropdown_${vertAlign}` : undefined\n    );\n    const handleDOMRef = (node: HTMLDivElement) => {\n      this.node = node;\n      if (elementRef) {\n        elementRef(node);\n      }\n    };\n    return (\n      <Datepicker\n        elementRef={handleDOMRef}\n        className={datepickerClassNames}\n        selectedDate={dateValue}\n        autoFocus\n        minDate={minDate}\n        maxDate={maxDate}\n        extensionRenderer={extensionRenderer}\n        onSelect={onSelect}\n        onBlur={onBlur}\n        onClose={onClose}\n      />\n    );\n  }\n}\n\nconst DatepickerDropdownPortal = autoAlign({\n  triggerSelector: '.slds-dropdown-trigger',\n  alignmentStyle: 'menu',\n})(DatepickerDropdown);\n\nexport type DateInputProps = {\n  value?: string | null;\n  defaultValue?: string | null;\n  opened?: boolean;\n  defaultOpened?: boolean;\n  dateFormat?: string;\n  includeTime?: boolean;\n  minDate?: string;\n  maxDate?: string;\n  menuAlign?: 'left' | 'right';\n  onBlur?: () => void;\n  onValueChange?: (value: string | null, prevValue: string | null) => void;\n  onComplete?: () => void;\n  extensionRenderer?: (...props: any[]) => JSX.Element;\n} & Omit<InputProps, 'value' | 'defaultValue' | 'onBlur' | 'onValueChange'>;\n\ntype DateInputState = {\n  id: string;\n  opened: boolean;\n  value: string | null;\n  inputValue: string | null;\n};\n/**\n *\n */\nexport class DateInput extends Component<DateInputProps, DateInputState> {\n  static isFormElement = true;\n\n  node: HTMLDivElement | null = null;\n\n  datepicker: HTMLDivElement | null = null;\n\n  input: HTMLInputElement | null = null;\n\n  constructor(props: Readonly<DateInputProps>) {\n    super(props);\n    this.state = {\n      id: `form-element-${uuid()}`,\n      opened:\n        typeof props.opened !== 'undefined'\n          ? props.opened\n          : props.defaultOpened || false,\n      value:\n        typeof props.value !== 'undefined'\n          ? props.value\n          : props.defaultValue || null,\n      inputValue: null,\n    };\n\n    this.onDateIconClick = this.onDateIconClick.bind(this);\n    this.onInputKeyDown = this.onInputKeyDown.bind(this);\n    this.onInputChange = this.onInputChange.bind(this);\n    this.onInputBlur = this.onInputBlur.bind(this);\n\n    this.onDatepickerSelect = this.onDatepickerSelect.bind(this);\n    this.onDatepickerBlur = this.onDatepickerBlur.bind(this);\n    this.onDatepickerClose = this.onDatepickerClose.bind(this);\n\n    registerStyle('dateinput', [\n      [\n        '.slds-has-error .slds-datepicker .slds-select',\n        '{ border: 1px solid #d8dde6; box-shadow: none; }',\n      ],\n    ]);\n  }\n\n  componentDidUpdate(prevProps: DateInputProps, prevState: DateInputState) {\n    if (this.props.onValueChange && prevState.value !== this.state.value) {\n      this.props.onValueChange(this.state.value, prevState.value);\n    }\n  }\n\n  onDateIconClick() {\n    setTimeout(() => {\n      this.showDatepicker();\n    }, 10);\n  }\n\n  onInputKeyDown(e: KeyboardEvent<HTMLInputElement>) {\n    if (e.keyCode === 13) {\n      // return key\n      e.preventDefault();\n      e.stopPropagation();\n      if (e.currentTarget.value !== undefined) {\n        this.setValueFromInput(e.currentTarget.value);\n      }\n      if (this.props.onComplete) {\n        setTimeout(() => {\n          if (this.props.onComplete) {\n            this.props.onComplete();\n          }\n        }, 10);\n      }\n    } else if (e.keyCode === 40) {\n      // down key\n      this.showDatepicker();\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    if (this.props.onKeyDown) {\n      this.props.onKeyDown(e);\n    }\n  }\n\n  onInputChange(e: ChangeEvent<HTMLInputElement>) {\n    const inputValue = e.target.value;\n    this.setState({ inputValue });\n    if (this.props.onChange) {\n      this.props.onChange(e);\n    }\n  }\n\n  onInputBlur(e: FocusEvent<HTMLInputElement | HTMLButtonElement>) {\n    this.setValueFromInput(e.target.value);\n    setTimeout(() => {\n      if (!this.isFocusedInComponent()) {\n        if (this.props.onBlur) {\n          this.props.onBlur();\n        }\n        if (this.props.onComplete) {\n          this.props.onComplete();\n        }\n      }\n    }, 10);\n  }\n\n  onDatepickerSelect(dvalue: string) {\n    const value = moment(dvalue).format(this.getValueFormat());\n    this.setState({ value, inputValue: null });\n    setTimeout(() => {\n      this.setState({ opened: false });\n      const inputEl = this.input;\n      if (inputEl) {\n        inputEl.focus();\n        inputEl.select();\n      }\n      if (this.props.onComplete) {\n        this.props.onComplete();\n      }\n    }, 200);\n  }\n\n  onDatepickerBlur() {\n    this.setState({ opened: false });\n    setTimeout(() => {\n      if (!this.isFocusedInComponent()) {\n        if (this.props.onBlur) {\n          this.props.onBlur();\n        }\n        if (this.props.onComplete) {\n          this.props.onComplete();\n        }\n      }\n    }, 10);\n  }\n\n  onDatepickerClose() {\n    this.setState({ opened: false });\n    const inputEl = this.input;\n    if (inputEl) {\n      inputEl.focus();\n      inputEl.select();\n    }\n  }\n\n  getValueFormat() {\n    return this.props.includeTime ? 'YYYY-MM-DDTHH:mm:ss.SSSZ' : 'YYYY-MM-DD';\n  }\n\n  getInputValueFormat() {\n    return this.props.dateFormat || (this.props.includeTime ? 'L HH:mm' : 'L');\n  }\n\n  setValueFromInput(inputValue: string) {\n    let { value } = this.state;\n    if (!inputValue) {\n      value = '';\n    } else {\n      const mvalue = moment(inputValue, this.getInputValueFormat());\n      if (mvalue.isValid()) {\n        value = mvalue.format(this.getValueFormat());\n      } else {\n        value = '';\n      }\n    }\n    this.setState({ value, inputValue: null });\n  }\n\n  isFocusedInComponent() {\n    const targetEl = document.activeElement;\n    return (\n      isElInChildren(this.node, targetEl) ||\n      isElInChildren(this.datepicker, targetEl)\n    );\n  }\n\n  showDatepicker() {\n    let { value } = this.state;\n    if (this.state.inputValue != null) {\n      const mvalue = moment(this.state.inputValue, this.getInputValueFormat());\n      if (mvalue.isValid()) {\n        value = mvalue.format(this.getValueFormat());\n      } else {\n        // eslint-disable-next-line prefer-destructuring\n        value = this.state.value;\n      }\n    }\n    this.setState({ opened: true, value });\n  }\n\n  renderInput({\n    inputValue,\n    ...props\n  }: { inputValue: string | undefined } & InputProps) {\n    return (\n      <div className='slds-input-has-icon slds-input-has-icon_right'>\n        <Input\n          inputRef={(node) => (this.input = node)}\n          {...props}\n          value={inputValue}\n          onKeyDown={this.onInputKeyDown}\n          onChange={this.onInputChange}\n          onBlur={this.onInputBlur}\n        />\n        <Button\n          type='icon'\n          icon='event'\n          disabled={props.disabled}\n          className='slds-input__icon slds-input__icon_right'\n          tabIndex={-1}\n          onClick={props.disabled ? undefined : this.onDateIconClick}\n          onBlur={this.onInputBlur}\n        />\n      </div>\n    );\n  }\n\n  render() {\n    const id = this.props.id || this.state.id;\n    const {\n      className,\n      totalCols,\n      cols,\n      label,\n      required,\n      error,\n      value,\n      menuAlign,\n      minDate,\n      maxDate,\n      opened,\n      extensionRenderer,\n      /* eslint-disable @typescript-eslint/no-unused-vars */\n      dateFormat,\n      defaultValue,\n      defaultOpened,\n      includeTime,\n      onComplete,\n      onValueChange,\n      /* eslint-enable @typescript-eslint/no-unused-vars */\n      ...props\n    } = this.props;\n    const dateValue = typeof value !== 'undefined' ? value : this.state.value;\n    const mvalue = moment(dateValue || undefined, this.getValueFormat());\n    const inputValue =\n      this.state.inputValue != null\n        ? this.state.inputValue\n        : dateValue != null && mvalue.isValid()\n        ? mvalue.format(this.getInputValueFormat())\n        : undefined;\n    const isOpened = typeof opened !== 'undefined' ? opened : this.state.opened;\n    const formElemProps = { id, totalCols, cols, label, required, error };\n    return (\n      <FormElement\n        formElementRef={(node) => (this.node = node)}\n        {...formElemProps}\n      >\n        <div className={classnames(className, 'slds-dropdown-trigger')}>\n          {this.renderInput({ id, inputValue, ...props })}\n          {isOpened ? (\n            <DatepickerDropdownPortal\n              portalClassName={className}\n              elementRef={(node: HTMLDivElement) => (this.datepicker = node)}\n              dateValue={\n                mvalue.isValid() ? mvalue.format('YYYY-MM-DD') : undefined\n              }\n              minDate={minDate}\n              maxDate={maxDate}\n              align={menuAlign}\n              extensionRenderer={extensionRenderer}\n              onBlur={this.onDatepickerBlur}\n              onSelect={this.onDatepickerSelect}\n              onClose={this.onDatepickerClose}\n            />\n          ) : (\n            undefined\n          )}\n        </div>\n      </FormElement>\n    );\n  }\n}\n"],"file":"DateInput.js"}